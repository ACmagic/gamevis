# <img src="logo.png" width="32"> Gamevis

[![Gitter](https://badges.gitter.im/saul/gamevis.svg)](https://gitter.im/saul/gamevis?utm_source=badge&utm_medium=badge&utm_campaign=pr-badge&utm_content=badge)

Gamevis is an open-source [Electron](http://electron.atom.io/) application for visualising gameplay data developed by [Saul Rennison](http://saul.re) as part of his degree dissertation.

Gamevis is unopinionated and easily fits many genres of games, and includes importers for Counter-Strike: Global Offensive and Dota 2.

## Screenshot

Screenshot demonstrating two layered heatmap visualisations:

<img src="screenshot.png" width="1024">

## Visualisations

* **Heatmaps**, many may be layered (as demonstrated in screenshot).
* More to come soon!

## Importers

Game | Path | Comments
-----|------|----------
Counter-Strike: Global Offensive | `importers/csgo` | Run `import.js` with the path to the demo file as the argument.
Dota 2: Reborn | `importers/dota_reborn` | Run `import.go` with the path to the `.dem` replay file as the argument.

## Release log

Gamevis is still a work-in-progress and is not expected to be in a production-ready state until Summer 2016. However, changes are committed frequently and any issues should be raised as bugs. Pull requests welcome of course!

## Database

Gamevis expects to connect to a Postgres database of version 9.3 or later due to JSONB querying features. This section details the structure of the database tables, that are automatically generated by the game client.

### session

Column | Type | Value
-------|------|-------
title | string, not null | User-friendly session title
level | string, not null | Name of the level/map/world this session was recorded from, e.g., `de_dust2`
game | string, not null | Short name of the game this session is associated with, e.g., `csgo`. This name will be used as the subdirectory to find the level overview data.
data | JSONB | (Optional) Custom data associated with this session.

### event

This table represents events that occur throughout a game's session. Events are optionally associated with one or more locations within the game world, and optionally associated with one or more entities.

Column | Type | Value
-------|------|-------
session_id | foreign key | → session
tick | int, not null | Game tick that this event occurred
name | string, not null | Name of the event
data | JSONB, not null | Event-specific data. The data keys for a particular event name are expected to be constant across all instances of it being fired in a particular session
locations | JSONB | (Optional) All locations associated with this instance of the event. Keys should be a user-friendly string, and the value a `Vector2` object, e.g., `{'player': {'x': 500, 'y': 250}}`
entities | JSONB | (Optional) All entities associated with this instance of the event. Keys should be a user-friendly string, and the values pointers into the `entity_props` table, e.g., `{'grenade': 175, 'thrower': 11}`

### entity_props

This table represents the entity properties throughout the recorded session.

Column | Type | Value
-------|------|-------
session_id | foreign key | → session
index | int, not null | Entity index. Does not have unique across an entire session, just for this entity at this tick
tick | int, not null | Game tick that this update occurred
prop | string, not null | Name of the property that was updated (e.g., `health`)
value | JSONB, not null | JSON object of the format `{'value': newValue}` representing the new value of the property.

## License

This project is licensed under the MIT license, see [LICENSE.md](LICENSE.md) for the full legalese.

## Acknowledgements

* Logo derived from Pao Media's gamepad logo, licensed under [Creative Commons (Attribution 3.0 Unported)](https://creativecommons.org/licenses/by/3.0/).